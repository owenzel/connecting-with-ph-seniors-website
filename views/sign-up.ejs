<%- include ("./partials/messages"); %>

<div class="container">
    <h4>Sign Up for Activities</h4>

    <!-- If a user is not logged in, prompt them to register or log in before signing up for an activity -->
    <% if (!user) { %>
        <p><a href="/users/register">REGISTER</a> for an account or <a href="/users/login">LOG IN</a> to speed up the activity sign-up process, save the activities you sign up for, receive email reminders, have the ability to change your RSVPs later, and create your own activity posts!</p>
    <% } %>

    <!-- If a user is logged in, fill in the appropriate fields with that user's information. Otherwise, leave those fields blank. -->
    <div class="section">
        <form action="/sign-up" method="POST">
            <div class="row">
                <div class="input-field">
                    <input
                        type="text"
                        id="name"
                        name="name"
                        placeholder="Enter Your Name"
                        value="<%= user ? user.name : '' %>"
                    >
                    <label for="name">Name</label>
                </div>
            </div>

            <div class="row">
                <div class="input-field">
                    <input 
                        type="email"
                        id="email"
                        name="email"
                        placeholder="Enter Your Email"
                        value="<%= user ? user.email : '' %>"
                    >
                    <label for="email">Email</label>
                </div>
            </div>

            <div class="row">
                <div class="input-field">
                    <input
                        type="tel"
                        id="phone"
                        name="phone"
                        pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}"
                        placeholder="Enter Your Phone Number (example: 444-444-4444)"
                        value="<%= user ? user.phone : '' %>"
                    >
                    <label for="phone">Phone Number</label>
                </div>
            </div>

            <div class="row">
                <p>Select the Activities You Want to Sign Up For:</p>
                <div class="input-field">
                    <% activities.forEach(function(activity) { %>
                        <p>
                            <label>
                                <input
                                    class="filled-in"
                                    type="checkbox"
                                    id="selectedActivities"
                                    name="selectedActivities"
                                    value="<%= activity._id %>"
                                >
                              <span class="black-text"><%= activity.title %></span>
                            </label>
                          </p>
                    <% }); %>
                </div>
            </div>

            <!-- Display the waiver and require a signature if the user is not signed in. -->
            <% if (!user) { %>
                <div class="row">
                    <h5>Waiver for Participation</h5>
                    <p><b>Your digital signature below signifies your agreement to the following:</b></p>
                    <p>I understand that participation in virtual activities over the phone, computer, tablet, or other technological device includes, but is not limited to, technology set-up, games, puzzles, crafts, reading, exercise, and discussion. I understand that participation requires physical and mental exertion.</p>
                    <p>As is the case with any activity, the risk of injury, even serious or disabling, is always present and cannot be entirely eliminated. I will progress at my own pace. If at any point I feel overexertion, pain, or discomfort, I will respect my bodyâ€™s limitations and I will rest before continuing to participate.</p>
                    <p>No virtual activity is a substitute for medical attention, examination, diagnoses or treatment. Virtual activities are not recommended and may not be safe under certain medical conditions. I affirm that I alone am responsible to decide to participate in virtual activities. I hereby agree to irrevocably release and waive any claims that I have now or hereafter may have against Olivia Wenzel, other virtual event facilitators, and the Parma Heights Senior Center or its employees.</p>
                    <p>I acknowledge that participation in virtual activities exposes me to a possible risk of personal injury. I am fully aware of this risk and hereby release the program leader Olivia Wenzel, other virtual event facilitators, and the Parma Heights Senior Center and its employees from any and all liability, negligence, or other claims arising from or in any way connected with my participation in virtual activities.</p>
                    <p>I shall not now or at any time in the future bring any legal action against Olivia Wenzel, other virtual event facilitators, and the Parma Heights Senior Center and its employees. This waiver is binding on me, my heirs, my spouse, my children, my legal representatives, my successors, and my assigns. I am physically fit to participate in virtual activities, and a licensed doctor has verified my physical condition for participation in the types of virtual activities I participate in.</p>
                    
                    <div class="input-field">
                        <input
                            type="text"
                            id="signature"
                            name="signature"
                            placeholder="Enter Your Name"
                        >
                        <label for="signature">Digital Signature</label>
                    </div>
                </div>
            <% } %>
            
            <div class="row">
                <input type="submit" value="Sign Up" class="btn">
                <a href="/" class="btn orange"><i class="fas fa-times-circle"></i> Cancel</a>
            </div>
        </form>
    </div>
</div>